{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import{useHistory}from'react-router-dom';import Swal from'sweetalert2';import axios from'axios';import{Baseurl}from'../components/Baseurl.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Toast2=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:1500,didOpen:function didOpen(toast){toast.addEventListener('mouseenter',Swal.stopTimer);toast.addEventListener('mouseleave',Swal.resumeTimer);}});var Sections=function Sections(){var history=useHistory();var sectionRef=useRef('');var contentRef=useRef('');var sectionOption=useRef('');// DISPLAY COURSE DETAILS\nuseEffect(function(){var allDetails=localStorage.getItem('details');if(allDetails){setLsDetails(JSON.parse(allDetails));setShowDetails(true);}else{setLsDetails({});}// LOOPING OUT THE SECTIONS\nvar sectionArray=localStorage.getItem('details');if(sectionArray){setLsSection(JSON.parse(sectionArray).section);if(lsSection===''){setShowSection(false);}else{setShowSection(true);}}else{setLsSection([]);}},[]);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),lsDetails=_useState2[0],setLsDetails=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),lsSection=_useState4[0],setLsSection=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showDetails=_useState6[0],setShowDetails=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showSection=_useState8[0],setShowSection=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isRoll=_useState10[0],setIsRoll=_useState10[1];var handleSection=function handleSection(){var LsSection=lsDetails.section;var sectionName=sectionRef.current.value;var section={name:\"\".concat(sectionName,\".\"),content:''};if(sectionName){if(LsSection){LsSection.push(section);localStorage.setItem('details',JSON.stringify(lsDetails));var sectionArray=localStorage.getItem('details');setLsSection(JSON.parse(sectionArray).section);//TO MAKE IT DELETE LIVE ON SCREEEN\nToast2.fire({icon:'success',title:'Section Name Addded'});}else{Toast2.fire({icon:'error',title:'No Course Details Found'});}}else{Toast2.fire({icon:'info',title:'Add Section Name'});}};var handleContent=function handleContent(){var cont=contentRef.current.value;var selectOpt=sectionOption.current.value;var LsSection=lsDetails.section;if(cont&&selectOpt){if(LsSection){var check=LsSection.find(function(data){return selectOpt==data.name;});if(check){check.content=cont;localStorage.setItem('details',JSON.stringify(lsDetails));var sectionArray=localStorage.getItem('details');Toast2.fire({icon:'success',title:'Content Addded'});setLsSection(JSON.parse(sectionArray).section);}}else{Toast2.fire({icon:'error',title:'No Course Details Found'});}}else{Toast2.fire({icon:'info',title:'Add Content'});}};var postCourse=function postCourse(e){e.preventDefault();var sectionArray=JSON.parse(localStorage.getItem('details'));if(sectionArray){var section=sectionArray.section;if(section!=''){var check='';section.forEach(function(sect){check=sect.content;});if(check===''){Toast2.fire({icon:'info',title:'One or more content is empty'});}else{setIsRoll(true);var course=localStorage.getItem('details');var token=localStorage.getItem('Token');axios.post(\"\".concat(Baseurl,\"postcourse.php\"),course).then(function(res){var postResponse=res.data;if(postResponse.CoursePosted){setIsRoll(false);Swal.fire({position:'top-end',icon:'success',title:'Course Posted',showConfirmButton:true,allowOutsideClick:false,confirmButtonText:\"Proceed!\"}).then(function(result){if(result.isConfirmed){Swal.fire(\"You can manage your course under the tutor's portal.\");}localStorage.removeItem('details');history.push('/dashboard/createdcourses');});}});}}else{Toast2.fire({icon:'info',title:'Add Section'});}}else{Toast2.fire({icon:'error',title:'No Course Details Found'});}};var deleteSection=function deleteSection(i){var localSec=JSON.parse(localStorage.getItem('details'));var sec=localSec.section;sec.forEach(function sect(value,index){if(i===index){sec.splice(index,1);localStorage.setItem('details',JSON.stringify(localSec));var sectionArray=localStorage.getItem('details');setLsSection(JSON.parse(sectionArray).section);//TO MAKE IT DELETE LIVE ON SCREEEN\nToast2.fire({icon:'success',title:'Section deleted'});history.push('/dashboard/createcourse');history.goBack();}});};return/*#__PURE__*/_jsx(\"div\",{className:\"border p-4 rounded\",children:/*#__PURE__*/_jsxs(\"form\",{\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border px-3 pt-3 mb-4 rounded text-center\",children:/*#__PURE__*/_jsxs(\"p\",{style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},className:\"font-weight-bold\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-puzzle-piece\"}),\" Course Sections \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"small\",{style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},children:\"You can go back to change details even after saved\"}),/*#__PURE__*/_jsx(\"br\",{})]})]})}),showDetails?/*#__PURE__*/_jsxs(\"div\",{class:\"aler py-2 pl-2 mb-3 tx\",style:{color:'#777777'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-uppercase\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Course Details\"})}),/*#__PURE__*/_jsx(\"strong\",{children:\"Course Title:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-uppercase\",children:lsDetails.title}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-uppercase\",children:lsDetails.category}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Cost:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-uppercase\",children:lsDetails.cost==''?'Free':/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\u20A6\",lsDetails.cost]})})]}):null,/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlSelect1\",className:\"tx font-weight-bold\",style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},children:\"Section Names\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",placeholder:\"Type in all section names\",\"aria-describedby\":\"basic-addon2\",ref:sectionRef}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text btn g font-weight-bold border-0\",id:\"basic-addon2\",onClick:handleSection,children:\"Add\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[showSection?/*#__PURE__*/_jsx(\"p\",{className:\"tx text-uppercase\",style:{color:'#777777'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Course Sections:\"})}):null,lsSection.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"aler py-2 px-2 mb-3 tx justify-content-center\",style:{color:'#777777'},children:[/*#__PURE__*/_jsxs(\"strong\",{class:\"text-uppercase\",children:[index+1,\". \",item.name]},index),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn-close float-right\",\"aria-label\":\"Close\",onClick:function onClick(){return deleteSection(index);}})]})});})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlTextarea1\",className:\"tx font-weight-bold\",style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{class:\"form-control\",id:\"exampleFormControlTextarea1\",rows:\"3\",ref:contentRef})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"tx font-weight-bold\",style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},children:\"Choose Section for this Content\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"select\",{class:\"form-control form-control\",ref:sectionOption,type:\"text\",children:lsSection.map(function(item,index){return/*#__PURE__*/_jsx(\"option\",{children:item.name},index);})}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text btn g font-weight-bold border-0\",id:\"basic-addon2\",onClick:handleContent,children:\"Add\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:lsSection.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{class:\"aler py-1 px-2 mb-3 tx justify-content-center\",style:{color:'#777777'},children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"strong\",{class:\"text-uppercase mr-3\",children:[index+1,\". \",item.name]},index),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Content:\"}),\" \",item.content.length>15?\"\".concat(item.content.substring(0,15),\"...\"):item.content==''?'No Content':/*#__PURE__*/_jsx(_Fragment,{children:item.content})]})]})})});})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn g px-3 shadow font-weight-bold\",style:{backgroundColor:'#5FCF80',color:'white',fontFamily:'\"Ubuntu\", sans-serif'},onClick:postCourse,children:[isRoll?/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-spinner fa-spin\"}):null,\" Post Course \",/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-long-arrow-right\"})]})]})});};export default Sections;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/src/components/Sections.js"],"names":["React","useEffect","useState","useRef","useHistory","Swal","axios","Baseurl","Toast2","mixin","toast","position","showConfirmButton","timer","didOpen","addEventListener","stopTimer","resumeTimer","Sections","history","sectionRef","contentRef","sectionOption","allDetails","localStorage","getItem","setLsDetails","JSON","parse","setShowDetails","sectionArray","setLsSection","section","lsSection","setShowSection","lsDetails","showDetails","showSection","isRoll","setIsRoll","handleSection","LsSection","sectionName","current","value","name","content","push","setItem","stringify","fire","icon","title","handleContent","cont","selectOpt","check","find","data","postCourse","e","preventDefault","forEach","sect","course","token","post","then","res","postResponse","CoursePosted","allowOutsideClick","confirmButtonText","result","isConfirmed","removeItem","deleteSection","i","localSec","sec","index","splice","goBack","fontFamily","color","category","cost","map","item","length","substring","backgroundColor"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport {useHistory} from 'react-router-dom'\nimport Swal from 'sweetalert2'\nimport axios from 'axios';\nimport {Baseurl} from '../components/Baseurl.js';\n\nconst Toast2 = Swal.mixin({\n   toast: true,\n   position: 'top-end',\n   showConfirmButton: false,\n   timer: 1500,\n   didOpen: (toast) => {\n   toast.addEventListener('mouseenter', Swal.stopTimer)\n   toast.addEventListener('mouseleave', Swal.resumeTimer)\n   }\n})\n \n\nconst Sections = () => {\n   let history = useHistory();\n   const sectionRef = useRef('')\n   const contentRef = useRef('')\n   const sectionOption = useRef('')\n   // DISPLAY COURSE DETAILS\n   useEffect(() => {\n   const allDetails = localStorage.getItem('details'); \n   if (allDetails) {  \n   setLsDetails(JSON.parse(allDetails))\n    setShowDetails(true) \n   \n     } else {\n      setLsDetails({})\n        \n   }\n   \n   // LOOPING OUT THE SECTIONS\n   const sectionArray = localStorage.getItem('details');\n   if (sectionArray) {\n      setLsSection(JSON.parse(sectionArray).section)\n      if (lsSection === '') {\n         setShowSection(false)\n      } else {\n         setShowSection(true)\n      }\n  \n      } else {\n   setLsSection([])   \n   } \n  \n   }, [])\n\nconst [lsDetails, setLsDetails] = useState({})\nconst [lsSection, setLsSection] = useState([])\nconst [showDetails, setShowDetails] = useState(false)\nconst [showSection, setShowSection] = useState(false)\nconst [isRoll, setIsRoll] = useState(false)   \n   \n   \nconst handleSection = () => {\nconst LsSection = lsDetails.section \nconst sectionName = sectionRef.current.value;  \nconst section = {name:`${sectionName}.`, content:''}\n   if (sectionName) {\n      if (LsSection) {\n      LsSection.push(section);\n      localStorage.setItem('details', JSON.stringify(lsDetails))\n      const sectionArray = localStorage.getItem('details');\n      setLsSection(JSON.parse(sectionArray).section)//TO MAKE IT DELETE LIVE ON SCREEEN\n      Toast2.fire({\n         icon: 'success',\n         title: 'Section Name Addded'\n       })  \n      } else {\n         Toast2.fire({\n            icon: 'error',\n            title: 'No Course Details Found'\n          })\n      }\n     \n   } else {\n      Toast2.fire({\n         icon: 'info',\n         title: 'Add Section Name'\n       }) \n}\n \n}\n   const handleContent = () => {\n   const cont = contentRef.current.value;\n   const selectOpt = sectionOption.current.value;\n   const LsSection = lsDetails.section\n   if (cont && selectOpt) {\n   if (LsSection) {\n   let check = LsSection.find(data => selectOpt  == data.name )\n   if (check) {\n   check.content = cont\n   localStorage.setItem('details', JSON.stringify(lsDetails))\n   const sectionArray = localStorage.getItem('details');\n   Toast2.fire({\n         icon: 'success',\n         title: 'Content Addded'\n   })\n   setLsSection(JSON.parse(sectionArray).section)\n      }\n      } else {\n      Toast2.fire({\n      icon: 'error',\n      title: 'No Course Details Found'\n          })  \n             }\n      } else {\n         Toast2.fire({\n            icon: 'info',\n            title: 'Add Content'\n      })\n        }\n   \n   }\n   const postCourse = (e) => {\n      e.preventDefault();\n      const sectionArray = JSON.parse(localStorage.getItem('details'));\n      if (sectionArray) {\n         const section = sectionArray.section\n         if (section != '') {\n            let check = ''\n            section.forEach(sect => {\n               check = sect.content\n            });\n            if (check === '') {\n               Toast2.fire({\n                  icon: 'info',\n                  title: 'One or more content is empty'\n               })\n            } else {\n               setIsRoll(true)\n               const course = localStorage.getItem('details');\n               const token = localStorage.getItem('Token')\n               axios.post(`${Baseurl}postcourse.php`, course\n               ).then(res => {\n               let postResponse = res.data;\n               if(postResponse.CoursePosted) {\n                  setIsRoll(false);\n                  Swal.fire({\n                     position: 'top-end',\n                     icon: 'success',\n                     title: 'Course Posted',\n                     showConfirmButton: true,\n                     allowOutsideClick: false,\n                     confirmButtonText: \"Proceed!\",\n                   }).then((result) => {\n                     if (result.isConfirmed) {\n                       Swal.fire(\n                         `You can manage your course under the tutor's portal.`,\n            \n                       )\n                     }\n                     localStorage.removeItem('details');\n                     history.push('/dashboard/createdcourses');\n                   })\n                  \n                  }\n               })\n            }\n        \n         } else {\n            Toast2.fire({\n               icon: 'info',\n               title: 'Add Section'\n            })\n         }\n     \n      }else {\n         Toast2.fire({\n            icon: 'error',\n            title: 'No Course Details Found'\n          })\n      }\n   }\n   const deleteSection = (i) => {\n      let localSec = JSON.parse(localStorage.getItem('details'));\n      let sec = localSec.section\n      sec.forEach(function sect(value, index) {\n      if (i === index) {\n      sec.splice(index, 1)\n      localStorage.setItem('details', JSON.stringify(localSec))\n      const sectionArray = localStorage.getItem('details');\n      setLsSection(JSON.parse(sectionArray).section) //TO MAKE IT DELETE LIVE ON SCREEEN\n      Toast2.fire({\n         icon: 'success',\n         title: 'Section deleted'\n      })\n      history.push('/dashboard/createcourse');\n      history.goBack();  \n      }\n      })\n      \n   }\n   \n\n\n return (\n  <div className=\"border p-4 rounded\">\n   <form data-aos=\"fade-up\">\n   <div class=\"form-group\">\n   <div className=\"border px-3 pt-3 mb-4 rounded text-center\">\n   <p style={{ fontFamily: '\"Poppins\" sans-serif', color: '#777777' }} className=\"font-weight-bold\"><i class=\"fas fa-puzzle-piece\"></i> Course Sections <br /> <span>\n                   <small style={{ fontFamily: '\"Poppins\" sans-serif', color: '#777777' }}>You can go back to change details even after saved</small><br/>\n   </span></p>\n   </div>\n   \n\n  {showDetails ? <div class=\"aler py-2 pl-2 mb-3 tx\" style={{ color: '#777777' }}>\n  <p className=\"text-uppercase\"><strong>Course Details</strong></p>\n  <strong>Course Title:</strong> <span className=\"text-uppercase\">{lsDetails.title}</span> <br/>\n  <strong>Category:</strong> <span className=\"text-uppercase\">{lsDetails.category}</span> <br />\n  <strong>Cost:</strong> <span className=\"text-uppercase\">{lsDetails.cost == '' ? 'Free' : <>₦{lsDetails.cost}</>}</span>          \n  </div> : null}\n\n             \n <label for=\"exampleFormControlSelect1\" className=\"tx font-weight-bold\" style={{fontFamily: '\"Poppins\" sans-serif', color:'#777777'}}>Section Names</label>\n <div class=\"input-group mb-3\">\n <input type=\"text\" class=\"form-control\" placeholder=\"Type in all section names\"  aria-describedby=\"basic-addon2\" ref={sectionRef}/>\n <div class=\"input-group-append\">\n <span class=\"input-group-text btn g font-weight-bold border-0\" id=\"basic-addon2\" onClick={handleSection}>Add</span>\n </div>\n </div>\n</div>\n\n   {/* SECTION LOOP */}\n   <div className=\"row\">\n   {showSection ? <p className=\"tx text-uppercase\" style={{color:'#777777'}}><strong>Course Sections:</strong></p>\n     :null}\n      {lsSection.map((item, index) => {\n      return (\n      <div className=\"col-md-3\">\n      <div class=\"aler py-2 px-2 mb-3 tx justify-content-center\"  style={{color:'#777777'}}>\n      <strong class=\"text-uppercase\" key={index}>{index+1}. {item.name}</strong>\n      <button type=\"button\" class=\"btn-close float-right\" aria-label=\"Close\" onClick={()=>deleteSection(index)}></button>\n      </div> \n      </div>\n         ); })}        \n      </div>\n\n            {/* SECTION LOOP ENDS */}\n\n          \n\n  <div class=\"form-group mt-4\">\n    <label for=\"exampleFormControlTextarea1\" className=\"tx font-weight-bold\" style={{fontFamily: '\"Poppins\" sans-serif', color:'#777777'}}>Content</label>\n    <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"  ref={contentRef}/>\n    </div>\n    <div class=\"form-group\">\n   <small className=\"tx font-weight-bold\" style={{fontFamily: '\"Poppins\" sans-serif', color:'#777777'}}>Choose Section for this Content</small>\n   <div class=\"input-group mb-3\">\n   <select class=\"form-control form-control\" ref={sectionOption} type=\"text\">\n   {lsSection.map((item, index) => {\n      return (\n    <option key={index}>{item.name}</option>\n               );\n             \n            })} \n   </select>\n   <div class=\"input-group-append\">\n   <span class=\"input-group-text btn g font-weight-bold border-0\" id=\"basic-addon2\" onClick={handleContent}>Add</span>\n   </div>\n   </div>\n   </div>\n\n   <div className=\"row\">\n    {lsSection.map((item, index) => {\n      return (\n      <div className=\"col-md-3\">\n      <div class=\"aler py-1 px-2 mb-3 tx justify-content-center\" style={{ color: '#777777' }}>\n      <>\n      <strong class=\"text-uppercase mr-3\" key={index}>{index+1}. {item.name}</strong>\n      <p><strong>Content:</strong> {item.content.length > 15 ? `${item.content.substring(0, 15)}...` :item.content == '' ? 'No Content': <>{item.content}</>}</p>\n      </>\n       </div> \n      </div>\n         ); })}        \n      </div>\n   <button className=\"btn g px-3 shadow font-weight-bold\" style={{\n    backgroundColor: '#5FCF80',\n    color: 'white',\n    fontFamily:'\"Ubuntu\", sans-serif'\n   }} onClick={postCourse}>{isRoll ? <i class=\"fad fa-spinner fa-spin\"></i> \n   : null } Post Course <i class=\"fal fa-long-arrow-right\"></i></button>\n \n   </form>\n    </div>\n )\n}\n\nexport default Sections\n"]},"metadata":{},"sourceType":"module"}