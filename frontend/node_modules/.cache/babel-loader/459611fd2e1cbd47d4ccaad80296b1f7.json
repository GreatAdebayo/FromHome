{"ast":null,"code":"var _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/src/components/Files.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport Swal from 'sweetalert2';\nimport axios from 'axios';\nimport { Baseurl } from '../components/Baseurl.js';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Toast2 = Swal.mixin({\n  toast: true,\n  position: 'top-end',\n  showConfirmButton: false,\n  timer: 2000,\n  didOpen: toast => {\n    toast.addEventListener('mouseenter', Swal.stopTimer);\n    toast.addEventListener('mouseleave', Swal.resumeTimer);\n  }\n});\n\nconst Files = () => {\n  _s();\n\n  let history = useHistory();\n  useEffect(() => {\n    const courseId = localStorage.getItem('courseId');\n    axios.post(`${Baseurl}coursesections.php`, JSON.stringify(courseId)).then(res => {\n      if (res.status == 200) {\n        if (res.data) {\n          let sectionResponse = res.data;\n          setSection(sectionResponse);\n        }\n      }\n    });\n  }, []);\n  const [section, setSection] = useState([]);\n  const [fileName, setFileName] = useState('');\n  const [file, setFile] = useState('');\n  const [isRoll, setIsRoll] = useState(false);\n\n  const chooseFile = e => {\n    let value = e.target.value;\n    setFileName(value);\n    let file = e.target.files[0];\n    setFile(file);\n\n    if (setFileName) {\n      Toast2.fire({\n        icon: 'success',\n        title: 'File Chosen'\n      });\n    }\n  };\n\n  const addFile = id => {\n    setIsRoll(true);\n    const formData = new FormData();\n\n    if (file) {\n      formData.append('myFile', file);\n      axios.post(`${Baseurl}postfiles.php`, formData, {\n        headers: {\n          'content-type': 'multipart/form-data',\n          'Authorization': id\n        }\n      }).then(res => {\n        if (res.status == 200) {\n          let postFileRes = res.data;\n          setIsRoll(false);\n\n          if (postFileRes.FileNotSupported) {\n            Toast2.fire({\n              icon: 'error',\n              title: 'File not Supported'\n            });\n          } else if (postFileRes.FileNotUploaded) {\n            Toast2.fire({\n              icon: 'error',\n              title: 'Uploaded Failed'\n            });\n          } else if (postFileRes.FileUploaded) {\n            Toast2.fire({\n              icon: 'success',\n              title: 'File Uploaded successfully'\n            });\n            history.push('/preview');\n            history.goBack();\n          } else if (postFileRes.FileLarge) {\n            Toast2.fire({\n              icon: 'info',\n              title: 'File too Large'\n            });\n          }\n        }\n      });\n    } else {\n      setIsRoll(false);\n      Toast2.fire({\n        icon: 'info',\n        title: 'Choose a File'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border p-4 rounded m-4\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      \"data-aos\": \"fade-up\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border px-3 pt-3 mb-4 rounded text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontFamily: '\"Poppins\" sans-serif',\n              color: '#777777'\n            },\n            className: \"font-weight-bold\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fas fa-paperclip\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 101\n            }, this), \" Add Files \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 144\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  fontFamily: '\"Poppins\" sans-serif',\n                  color: '#777777'\n                },\n                children: \"You can add Videos, PDF, Text Files etc.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 3\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 151\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 4\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [setSection ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"tx text-uppercase\",\n            style: {\n              color: '#777777'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Course Sections:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 78\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 19\n          }, this) : null, fileName == '' ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"aler py-3 pl-2 mb-3 tx\",\n            style: {\n              color: '#777777'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"File Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 7\n            }, this), \" \", fileName.split(/[\\\\/]/).pop(), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 67\n            }, this), \" \", isRoll ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fad fa-spinner fa-spin fa-2x mr-2 mt-1\",\n                style: {\n                  color: '#5fcf80'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 89\n              }, this), \"Uploading, please wait, do not refresh page...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 83\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 31\n          }, this), section.map((item, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"aler py-1 px-3 mb-3 pt-3 tx\",\n                style: {\n                  color: '#777777'\n                },\n                children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    class: \"text-uppercase mr-3\",\n                    children: [index + 1, \". \", item.section_name]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Content:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 10\n                    }, this), \" \", item.content.length > 15 ? `${item.content.substring(0, 15)}...` : item.content == '' ? 'No Content' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: item.content\n                    }, void 0, false), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 161\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: [\"File: \", item.files == 0 ? 'No File Attached' : item.files]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 137,\n                          columnNumber: 16\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 137,\n                        columnNumber: 13\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 7\n                    }, this), \"  \", /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"btn g btn-sm\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \" Choose File\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 6\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"file\",\n                        hidden: true,\n                        onChange: chooseFile\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 36\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 104\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"btn g float-right btn-sm\",\n                      onClick: () => addFile(item.section_id),\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 95\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 16\n                    }, this), \"  \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 7\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 7\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 7\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Files, \"gQZA3SnqEpDxossmj1Dxx4pna/U=\", false, function () {\n  return [useHistory];\n});\n\n_c = Files;\nexport default Files;\n\nvar _c;\n\n$RefreshReg$(_c, \"Files\");","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/src/components/Files.js"],"names":["React","useEffect","useState","useRef","Swal","axios","Baseurl","useHistory","Toast2","mixin","toast","position","showConfirmButton","timer","didOpen","addEventListener","stopTimer","resumeTimer","Files","history","courseId","localStorage","getItem","post","JSON","stringify","then","res","status","data","sectionResponse","setSection","section","fileName","setFileName","file","setFile","isRoll","setIsRoll","chooseFile","e","value","target","files","fire","icon","title","addFile","id","formData","FormData","append","headers","postFileRes","FileNotSupported","FileNotUploaded","FileUploaded","push","goBack","FileLarge","fontFamily","color","split","pop","map","item","index","section_name","content","length","substring","section_id"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,MAApC,QAAiD,OAAjD;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,0BAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;AAIA,MAAMC,MAAM,GAAGJ,IAAI,CAACK,KAAL,CAAW;AACvBC,EAAAA,KAAK,EAAE,IADgB;AAEvBC,EAAAA,QAAQ,EAAE,SAFa;AAGvBC,EAAAA,iBAAiB,EAAE,KAHI;AAIvBC,EAAAA,KAAK,EAAE,IAJgB;AAKvBC,EAAAA,OAAO,EAAGJ,KAAD,IAAW;AACpBA,IAAAA,KAAK,CAACK,gBAAN,CAAuB,YAAvB,EAAqCX,IAAI,CAACY,SAA1C;AACAN,IAAAA,KAAK,CAACK,gBAAN,CAAuB,YAAvB,EAAqCX,IAAI,CAACa,WAA1C;AACC;AARsB,CAAX,CAAf;;AAYA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AACjB,MAAIC,OAAO,GAAGZ,UAAU,EAAxB;AACAN,EAAAA,SAAS,CAAC,MAAM;AACb,UAAMmB,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAjB;AACAjB,IAAAA,KAAK,CAACkB,IAAN,CAAY,GAAEjB,OAAQ,oBAAtB,EAA2CkB,IAAI,CAACC,SAAL,CAAeL,QAAf,CAA3C,EACEM,IADF,CACOC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,MAAJ,IAAc,GAAlB,EAAuB;AACpB,YAAID,GAAG,CAACE,IAAR,EAAc;AACjB,cAAIC,eAAe,GAAGH,GAAG,CAACE,IAA1B;AACAE,UAAAA,UAAU,CAACD,eAAD,CAAV;AACC;AAGA;AACH,KAVD;AAWF,GAbQ,EAaN,EAbM,CAAT;AAiBD,QAAM,CAACE,OAAD,EAAUD,UAAV,IAAwB7B,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC+B,QAAD,EAAWC,WAAX,IAA0BhC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACiC,IAAD,EAAOC,OAAP,IAAkBlC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACmC,MAAD,EAASC,SAAT,IAAsBpC,QAAQ,CAAC,KAAD,CAApC;;AAEC,QAAMqC,UAAU,GAAIC,CAAD,IAAO;AACvB,QAAIC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASD,KAArB;AACAP,IAAAA,WAAW,CAACO,KAAD,CAAX;AACA,QAAIN,IAAI,GAAGK,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX;AACAP,IAAAA,OAAO,CAACD,IAAD,CAAP;;AACH,QAAID,WAAJ,EAAiB;AAChB1B,MAAAA,MAAM,CAACoC,IAAP,CAAY;AACZC,QAAAA,IAAI,EAAE,SADM;AAEZC,QAAAA,KAAK,EAAE;AAFK,OAAZ;AAIA;AACA,GAXD;;AAaA,QAAMC,OAAO,GAAIC,EAAD,IAAQ;AACxBV,IAAAA,SAAS,CAAC,IAAD,CAAT;AACA,UAAMW,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AACA,QAAGf,IAAH,EAAS;AACNc,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BhB,IAA1B;AACH9B,MAAAA,KAAK,CAACkB,IAAN,CAAY,GAAEjB,OAAQ,eAAtB,EAAsC2C,QAAtC,EAAgD;AAC7CG,QAAAA,OAAO,EAAE;AACN,0BAAgB,qBADV;AAEN,2BAAkBJ;AAFZ;AADoC,OAAhD,EAKGtB,IALH,CAKQC,GAAG,IAAI;AACZ,YAAIA,GAAG,CAACC,MAAJ,IAAc,GAAlB,EAAuB;AACpB,cAAIyB,WAAW,GAAG1B,GAAG,CAACE,IAAtB;AACAS,UAAAA,SAAS,CAAC,KAAD,CAAT;;AACA,cAAIe,WAAW,CAACC,gBAAhB,EAAkC;AAC/B9C,YAAAA,MAAM,CAACoC,IAAP,CAAY;AACTC,cAAAA,IAAI,EAAE,OADG;AAETC,cAAAA,KAAK,EAAE;AAFE,aAAZ;AAIF,WALD,MAKM,IAAIO,WAAW,CAACE,eAAhB,EAAiC;AACpC/C,YAAAA,MAAM,CAACoC,IAAP,CAAY;AACTC,cAAAA,IAAI,EAAE,OADG;AAETC,cAAAA,KAAK,EAAE;AAFE,aAAZ;AAIF,WALK,MAKC,IAAIO,WAAW,CAACG,YAAhB,EAA8B;AAClChD,YAAAA,MAAM,CAACoC,IAAP,CAAY;AACTC,cAAAA,IAAI,EAAE,SADG;AAETC,cAAAA,KAAK,EAAE;AAFE,aAAZ;AAIH3B,YAAAA,OAAO,CAACsC,IAAR,CAAa,UAAb;AACAtC,YAAAA,OAAO,CAACuC,MAAR;AACC,WAPM,MAOA,IAAIL,WAAW,CAACM,SAAhB,EAA2B;AAC/BnD,YAAAA,MAAM,CAACoC,IAAP,CAAY;AACTC,cAAAA,IAAI,EAAE,MADG;AAETC,cAAAA,KAAK,EAAE;AAFE,aAAZ;AAIF;AACH;AACG,OAjCP;AAkCC,KApCD,MAoCO;AACJR,MAAAA,SAAS,CAAC,KAAD,CAAT;AACA9B,MAAAA,MAAM,CAACoC,IAAP,CAAY;AACTC,QAAAA,IAAI,EAAE,MADG;AAETC,QAAAA,KAAK,EAAE;AAFE,OAAZ;AAIF;AAEA,GA/CD;;AAoDD,sBACE;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA,2BACA;AAAM,kBAAS,SAAf;AAAA,6BACA;AAAK,QAAA,KAAK,EAAC,YAAX;AAAA,gCACA;AAAK,UAAA,SAAS,EAAC,2CAAf;AAAA,iCACD;AAAG,YAAA,KAAK,EAAE;AAAEc,cAAAA,UAAU,EAAE,sBAAd;AAAsCC,cAAAA,KAAK,EAAE;AAA7C,aAAV;AAAoE,YAAA,SAAS,EAAC,kBAA9E;AAAA,oCAAiG;AAAG,cAAA,KAAK,EAAC;AAAT;AAAA;AAAA;AAAA;AAAA,oBAAjG,8BAA4I;AAAA;AAAA;AAAA;AAAA,oBAA5I,oBAAmJ;AAAA,qCACpJ;AAAO,gBAAA,KAAK,EAAE;AAACD,kBAAAA,UAAU,EAAE,sBAAb;AAAqCC,kBAAAA,KAAK,EAAE;AAA5C,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADoJ;AAAA;AAAA;AAAA;AAAA,oBAAnJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADC;AAAA;AAAA;AAAA;AAAA,gBADA,eASD;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,qBACE9B,UAAU,gBAAG;AAAG,YAAA,SAAS,EAAC,mBAAb;AAAiC,YAAA,KAAK,EAAE;AAAC8B,cAAAA,KAAK,EAAC;AAAP,aAAxC;AAAA,mCAA2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA3D;AAAA;AAAA;AAAA;AAAA,kBAAH,GACV,IAFF,EAGG5B,QAAQ,IAAI,EAAZ,GAAiB,IAAjB,gBAAwB;AAAK,YAAA,KAAK,EAAC,wBAAX;AAAoC,YAAA,KAAK,EAAE;AAAE4B,cAAAA,KAAK,EAAE;AAAT,aAA3C;AAAA,oCACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADwB,OACK5B,QAAQ,CAAC6B,KAAT,CAAe,OAAf,EAAwBC,GAAxB,EADL,oBACoC;AAAA;AAAA;AAAA;AAAA,oBADpC,OAC2C1B,MAAM,gBAAG;AAAA,sCAAM;AAAG,gBAAA,KAAK,EAAC,wCAAT;AAAkD,gBAAA,KAAK,EAAE;AAACwB,kBAAAA,KAAK,EAAC;AAAP;AAAzD;AAAA;AAAA;AAAA;AAAA,sBAAN;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,GACxE,IAFuB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAH3B,EAQE7B,OAAO,CAACgC,GAAR,CAAY,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC3B,gCACD;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA,qCACA;AAAK,gBAAA,KAAK,EAAC,6BAAX;AAAyC,gBAAA,KAAK,EAAE;AAAEL,kBAAAA,KAAK,EAAE;AAAT,iBAAhD;AAAA,uCACA;AAAA,0CACA;AAAQ,oBAAA,KAAK,EAAC,qBAAd;AAAA,+BAAiDK,KAAK,GAAC,CAAvD,QAA4DD,IAAI,CAACE,YAAjE;AAAA,qBAAyCD,KAAzC;AAAA;AAAA;AAAA;AAAA,0BADA,eAEA;AAAA,4CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAH,OAA8BD,IAAI,CAACG,OAAL,CAAaC,MAAb,GAAsB,EAAtB,GAA4B,GAAEJ,IAAI,CAACG,OAAL,CAAaE,SAAb,CAAuB,CAAvB,EAA0B,EAA1B,CAA8B,KAA5D,GAAmEL,IAAI,CAACG,OAAL,IAAgB,EAAhB,GAAqB,YAArB,gBAAoC;AAAA,gCAAGH,IAAI,CAACG;AAAR,qCAArI,oBAA0J;AAAA;AAAA;AAAA;AAAA,4BAA1J,eACA;AAAA,8CAAM;AAAA,+CAAG;AAAA,+CAAeH,IAAI,CAACtB,KAAL,IAAc,CAAd,GAAkB,kBAAlB,GAAuCsB,IAAI,CAACtB,KAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,8BAAN;AAAA;AAAA;AAAA;AAAA;AAAA,4BADA,qBACiG;AAAO,sBAAA,SAAS,EAAC,cAAjB;AAAA,8CAClG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADkG,oBACpE;AAAO,wBAAA,IAAI,EAAC,MAAZ;AAAmB,wBAAA,MAAM,MAAzB;AAA0B,wBAAA,QAAQ,EAAEJ;AAApC;AAAA;AAAA;AAAA;AAAA,8BADoE;AAAA;AAAA;AAAA;AAAA;AAAA,4BADjG,oBAGS;AAAG,sBAAA,SAAS,EAAC,0BAAb;AAAwC,sBAAA,OAAO,EAAE,MAAIQ,OAAO,CAACkB,IAAI,CAACM,UAAN,CAA5D;AAAA,8CAA+E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA/E;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHT;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADC;AAaF,WAdA,CARF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATC;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADF;AAyCD,CAlID;;GAAMrD,K;UACWX,U;;;KADXW,K;AAoIN,eAAeA,KAAf","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport Swal from 'sweetalert2'\nimport axios from 'axios';\nimport { Baseurl } from '../components/Baseurl.js';\nimport { useHistory } from 'react-router-dom'\n\n\n\nconst Toast2 = Swal.mixin({\n   toast: true,\n   position: 'top-end',\n   showConfirmButton: false,\n   timer: 2000,\n   didOpen: (toast) => {\n   toast.addEventListener('mouseenter', Swal.stopTimer)\n   toast.addEventListener('mouseleave', Swal.resumeTimer)\n   }\n})\n\n\nconst Files = () => {\n   let history = useHistory();\n   useEffect(() => {\n      const courseId = localStorage.getItem('courseId');\n      axios.post(`${Baseurl}coursesections.php`, JSON.stringify(courseId)\n      ).then(res => {\n         if (res.status == 200) {\n            if (res.data) {\n         let sectionResponse = res.data\n         setSection(sectionResponse)\n         }\n  \n       \n         }\n      })  \n   }, [])\n   \n\n \n  const [section, setSection] = useState([])\n  const [fileName, setFileName] = useState('')\n  const [file, setFile] = useState('')\n  const [isRoll, setIsRoll] = useState(false) \n\n   const chooseFile = (e) => {\n      let value = e.target.value;\n      setFileName(value);\n      let file = e.target.files[0];\n      setFile(file)\n   if (setFileName) {\n    Toast2.fire({\n    icon: 'success',\n    title: 'File Chosen'\n    }) \n   }  \n   }\n\n   const addFile = (id) => {\n   setIsRoll(true)\n   const formData = new FormData();\n   if(file) {\n      formData.append('myFile', file);\n   axios.post(`${Baseurl}postfiles.php`, formData, {\n      headers: {\n         'content-type': 'multipart/form-data',\n         'Authorization':  id\n         }\n   }).then(res => {\n      if (res.status == 200) {\n         let postFileRes = res.data\n         setIsRoll(false)\n         if (postFileRes.FileNotSupported) {\n            Toast2.fire({\n               icon: 'error',\n               title: 'File not Supported'\n            })\n         }else if (postFileRes.FileNotUploaded) {\n            Toast2.fire({\n               icon: 'error',\n               title: 'Uploaded Failed'\n            })\n         } else if (postFileRes.FileUploaded) {\n            Toast2.fire({\n               icon: 'success',\n               title: 'File Uploaded successfully'\n            })\n         history.push('/preview');\n         history.goBack();\n         } else if (postFileRes.FileLarge) {\n            Toast2.fire({\n               icon: 'info',\n               title: 'File too Large'\n            })\n         } \n      }\n         }) \n   } else {\n      setIsRoll(false)\n      Toast2.fire({\n         icon: 'info',\n         title: 'Choose a File'\n         }) \n   }\n  \n   }\n\n\n\n\n  return (\n    <div className=\"border p-4 rounded m-4\">\n    <form data-aos=\"fade-up\">\n    <div class=\"form-group\">\n    <div className=\"border px-3 pt-3 mb-4 rounded text-center\">\n   <p style={{ fontFamily: '\"Poppins\" sans-serif', color: '#777777' }} className=\"font-weight-bold\"><i class=\"fas fa-paperclip\"></i> Add Files <br /> <span>\n  <small style={{fontFamily: '\"Poppins\" sans-serif', color: '#777777' }}>You can add Videos, PDF, Text Files etc.</small>\n  </span></p>\n   </div>\n          \n\n\n   <div className=\"row\">\n    {setSection ? <p className=\"tx text-uppercase\" style={{color:'#777777'}}><strong>Course Sections:</strong></p>\n   : null}\n     {fileName == '' ? null : <div class=\"aler py-3 pl-2 mb-3 tx\" style={{ color: '#777777' }}>\n      <strong>File Name:</strong> {fileName.split(/[\\\\/]/).pop()} <br/> {isRoll ? <span><i class=\"fad fa-spinner fa-spin fa-2x mr-2 mt-1\" style={{color:'#5fcf80'}}></i>Uploading, please wait, do not refresh page...</span>\n     : null } \n      </div>}            \n  \n    {section.map((item, index) => {\n       return (\n      <div className=\"col-md-3\">\n      <div class=\"aler py-1 px-3 mb-3 pt-3 tx\" style={{ color: '#777777' }}>\n      <>\n      <strong class=\"text-uppercase mr-3\" key={index}>{index+1}. {item.section_name}</strong>\n      <p><strong>Content:</strong> {item.content.length > 15 ? `${item.content.substring(0, 15)}...` : item.content == '' ? 'No Content' : <>{item.content}</>} <br />\n      <span><p><strong>File: {item.files == 0 ? 'No File Attached' : item.files}</strong></p> </span>  <label className=\"btn g btn-sm\">\n     <strong> Choose File</strong> <input type=\"file\" hidden onChange={chooseFile}/>\n      </label> <a className=\"btn g float-right btn-sm\" onClick={()=>addFile(item.section_id)}><strong>Add</strong> </a>  </p>    \n      </>\n       </div> \n      </div>\n       );\n    })}   \n   </div>\n\n   </div>\n   </form>\n   </div>\n )\n}\n\nexport default Files;\n"]},"metadata":{},"sourceType":"module"}