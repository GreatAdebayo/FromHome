{"ast":null,"code":"import _slicedToArray from\"/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import Swal from'sweetalert2';import axios from'axios';import{Baseurl}from'../components/Baseurl.js';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Toast2=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:2000,didOpen:function didOpen(toast){toast.addEventListener('mouseenter',Swal.stopTimer);toast.addEventListener('mouseleave',Swal.resumeTimer);}});var Files=function Files(){var history=useHistory();useEffect(function(){var courseId=localStorage.getItem('courseId');axios.post(\"\".concat(Baseurl,\"coursesections.php\"),JSON.stringify(courseId)).then(function(res){if(res.status==200){var sectionResponse=res.data;setSection(sectionResponse);}});},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),section=_useState2[0],setSection=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),fileName=_useState4[0],setFileName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isRoll=_useState8[0],setIsRoll=_useState8[1];var chooseFile=function chooseFile(e){var value=e.target.value;setFileName(value);var file=e.target.files[0];setFile(file);if(setFileName){Toast2.fire({icon:'success',title:'File Chosen'});}};var addFile=function addFile(id){setIsRoll(true);var formData=new FormData();if(file){formData.append('myFile',file);axios.post(\"\".concat(Baseurl,\"postfiles.php\"),formData,{headers:{'content-type':'multipart/form-data','Authorization':id}}).then(function(res){if(res.status==200){var postFileRes=res.data;setIsRoll(false);if(postFileRes.FileNotSupported){Toast2.fire({icon:'error',title:'File not Supported'});}else if(postFileRes.FileNotUploaded){Toast2.fire({icon:'error',title:'Uploaded Failed'});}else if(postFileRes.FileUploaded){Toast2.fire({icon:'success',title:'File Uploaded successfully'});history.push('/preview');history.goBack();}else if(postFileRes.FileLarge){Toast2.fire({icon:'info',title:'File too Large'});}}});}else{setIsRoll(false);Toast2.fire({icon:'info',title:'Choose a File'});}};return/*#__PURE__*/_jsx(\"div\",{className:\"border p-4 rounded m-4\",children:/*#__PURE__*/_jsx(\"form\",{\"data-aos\":\"fade-up\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border px-3 pt-3 mb-4 rounded text-center\",children:/*#__PURE__*/_jsxs(\"p\",{style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},className:\"font-weight-bold\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-paperclip\"}),\" Add Files \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"small\",{style:{fontFamily:'\"Poppins\" sans-serif',color:'#777777'},children:\"You can add Videos, PDF, Text Files etc.\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[setSection?/*#__PURE__*/_jsx(\"p\",{className:\"tx text-uppercase\",style:{color:'#777777'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Course Sections:\"})}):null,fileName==''?null:/*#__PURE__*/_jsxs(\"div\",{class:\"aler py-3 pl-2 mb-3 tx\",style:{color:'#777777'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"File Name:\"}),\" \",fileName.split(/[\\\\/]/).pop(),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",isRoll?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fad fa-spinner fa-spin fa-2x mr-2 mt-1\",style:{color:'#5fcf80'}}),\"Uploading, please wait, do not refresh page...\"]}):null]}),section.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{class:\"aler py-1 px-3 mb-3 pt-3 tx\",style:{color:'#777777'},children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"strong\",{class:\"text-uppercase mr-3\",children:[index+1,\". \",item.section_name]},index),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Content:\"}),\" \",item.content.length>15?\"\".concat(item.content.substring(0,15),\"...\"):item.content==''?'No Content':/*#__PURE__*/_jsx(_Fragment,{children:item.content}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"File: \",item.files=='false'?'No File Attached':'File Attached']})}),\" \"]}),\"  \",/*#__PURE__*/_jsxs(\"label\",{className:\"btn g btn-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\" Choose File\"}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,onChange:chooseFile})]}),\" \",/*#__PURE__*/_jsxs(\"a\",{className:\"btn g float-right btn-sm\",onClick:function onClick(){return addFile(item.section_id);},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Add\"}),\" \"]}),\"  \"]})]})})});})]})]})})});};export default Files;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/fromhome/frontend/src/components/Files.js"],"names":["React","useEffect","useState","useRef","Swal","axios","Baseurl","useHistory","Toast2","mixin","toast","position","showConfirmButton","timer","didOpen","addEventListener","stopTimer","resumeTimer","Files","history","courseId","localStorage","getItem","post","JSON","stringify","then","res","status","sectionResponse","data","setSection","section","fileName","setFileName","file","setFile","isRoll","setIsRoll","chooseFile","e","value","target","files","fire","icon","title","addFile","id","formData","FormData","append","headers","postFileRes","FileNotSupported","FileNotUploaded","FileUploaded","push","goBack","FileLarge","fontFamily","color","split","pop","map","item","index","section_name","content","length","substring","section_id"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport Swal from 'sweetalert2'\nimport axios from 'axios';\nimport { Baseurl } from '../components/Baseurl.js';\nimport { useHistory } from 'react-router-dom'\n\n\n\nconst Toast2 = Swal.mixin({\n   toast: true,\n   position: 'top-end',\n   showConfirmButton: false,\n   timer: 2000,\n   didOpen: (toast) => {\n   toast.addEventListener('mouseenter', Swal.stopTimer)\n   toast.addEventListener('mouseleave', Swal.resumeTimer)\n   }\n})\n\n\nconst Files = () => {\n   let history = useHistory();\n   useEffect(() => {\n      const courseId = localStorage.getItem('courseId');\n      axios.post(`${Baseurl}coursesections.php`, JSON.stringify(courseId)\n      ).then(res => {\n      if(res.status == 200) {\n         let sectionResponse = res.data\n         setSection(sectionResponse)\n         }\n      })  \n   }, [])\n   \n\n \n  const [section, setSection] = useState([])\n  const [fileName, setFileName] = useState('')\n  const [file, setFile] = useState('')\n  const [isRoll, setIsRoll] = useState(true) \n\n   const chooseFile = (e) => {\n      let value = e.target.value;\n      setFileName(value);\n      let file = e.target.files[0];\n      setFile(file)\n   if (setFileName) {\n    Toast2.fire({\n    icon: 'success',\n    title: 'File Chosen'\n    }) \n   }  \n   }\n\n   const addFile = (id) => {\n   setIsRoll(true)\n   const formData = new FormData();\n   if(file) {\n      formData.append('myFile', file);\n   axios.post(`${Baseurl}postfiles.php`, formData, {\n      headers: {\n         'content-type': 'multipart/form-data',\n         'Authorization':  id\n         }\n   }).then(res => {\n      if (res.status == 200) {\n         let postFileRes = res.data\n         setIsRoll(false)\n         if (postFileRes.FileNotSupported) {\n            Toast2.fire({\n               icon: 'error',\n               title: 'File not Supported'\n            })\n         }else if (postFileRes.FileNotUploaded) {\n            Toast2.fire({\n               icon: 'error',\n               title: 'Uploaded Failed'\n            })\n         } else if (postFileRes.FileUploaded) {\n            Toast2.fire({\n               icon: 'success',\n               title: 'File Uploaded successfully'\n            })\n         history.push('/preview');\n         history.goBack();\n         } else if (postFileRes.FileLarge) {\n            Toast2.fire({\n               icon: 'info',\n               title: 'File too Large'\n            })\n         } \n      }\n         }) \n   } else {\n      setIsRoll(false)\n      Toast2.fire({\n         icon: 'info',\n         title: 'Choose a File'\n         }) \n   }\n  \n   }\n\n\n\n\n  return (\n    <div className=\"border p-4 rounded m-4\">\n    <form data-aos=\"fade-up\">\n    <div class=\"form-group\">\n    <div className=\"border px-3 pt-3 mb-4 rounded text-center\">\n   <p style={{ fontFamily: '\"Poppins\" sans-serif', color: '#777777' }} className=\"font-weight-bold\"><i class=\"fas fa-paperclip\"></i> Add Files <br /> <span>\n  <small style={{fontFamily: '\"Poppins\" sans-serif', color: '#777777' }}>You can add Videos, PDF, Text Files etc.</small>\n  </span></p>\n   </div>\n          \n\n\n   <div className=\"row\">\n    {setSection ? <p className=\"tx text-uppercase\" style={{color:'#777777'}}><strong>Course Sections:</strong></p>\n   : null}\n     {fileName == '' ? null : <div class=\"aler py-3 pl-2 mb-3 tx\" style={{ color: '#777777' }}>\n      <strong>File Name:</strong> {fileName.split(/[\\\\/]/).pop()} <br/> {isRoll ? <span><i class=\"fad fa-spinner fa-spin fa-2x mr-2 mt-1\" style={{color:'#5fcf80'}}></i>Uploading, please wait, do not refresh page...</span>\n   : null } \n      </div>}            \n  \n    {section.map((item, index) => {\n       return (\n      <div className=\"col-md-3\">\n      <div class=\"aler py-1 px-3 mb-3 pt-3 tx\" style={{ color: '#777777' }}>\n      <>\n      <strong class=\"text-uppercase mr-3\" key={index}>{index+1}. {item.section_name}</strong>\n      <p><strong>Content:</strong> {item.content.length > 15 ? `${item.content.substring(0, 15)}...` : item.content == '' ? 'No Content' : <>{item.content}</>} <br />\n      <span><p><strong>File: {item.files == 'false' ? 'No File Attached' : 'File Attached'}</strong></p> </span>  <label className=\"btn g btn-sm\">\n     <strong> Choose File</strong> <input type=\"file\" hidden onChange={chooseFile}/>\n      </label> <a className=\"btn g float-right btn-sm\" onClick={()=>addFile(item.section_id)}><strong>Add</strong> </a>  </p>    \n      </>\n       </div> \n      </div>\n       );\n    })}   \n   </div>\n\n   </div>\n   </form>\n   </div>\n )\n}\n\nexport default Files;\n"]},"metadata":{},"sourceType":"module"}